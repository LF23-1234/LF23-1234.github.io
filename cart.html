<!DOCTYPE html>
<html lang="es" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Carrito</title>
    <link rel="icon" href="img/logo.ico" type="image/svg+xml" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <!-- topbar injected -->
    <nav
      class="navbar navbar-expand-lg navbar-dark nav-glass fixed-top"
      style="top: 38px"
    >
      <div class="container">
        <a class="navbar-brand" href="index.html"
          ><img src="img/logo.png" style="height: 40px" class="me-2" />LFH
          TECH</a
        >
      </div>
    </nav>
    <main class="container" style="padding-top: 140px">
      <h1>Tu carrito</h1>
      <div id="cartItems" class="mb-4"></div>
      <div class="d-flex justify-content-between">
        <div></div>
        <div>
          <a href="checkout.html" class="btn btn-primary">Continuar a pagar</a>
        </div>
      </div>
    </main>
    <footer class="py-4 footer">
      <div class="container">
        <div>
          <strong>LFH TECHNOLOGY, SRL</strong> © <span id="year"></span>
        </div>
      </div>
    </footer>
    <div
      id="toastContainer"
      class="toast-container position-fixed bottom-0 end-0 p-3"
    ></div>
    <script src="js/script.js"></script>
    <script>
      const products = [
        { id: 1, title: 'Laptop Gamer ZX 15"', price: 1299.99 },
        { id: 2, title: "Mouse Wireless Pro", price: 49.99 },
        { id: 3, title: "Cámara IP 1080p", price: 89.99 },
        { id: 4, title: "Laptop Ultrabook A7", price: 999.99 },
      ];
      function renderCart() {
        const cart = JSON.parse(localStorage.getItem("lfh_cart") || "[]");
        const container = document.getElementById("cartItems");
        if (cart.length === 0) {
          container.innerHTML = "<p>Tu carrito está vacío.</p>";
          return;
        }
        let html = '<ul class="list-group">';
        let total = 0;
        cart.forEach((id) => {
          const p = products.find((x) => x.id === id);
          if (p) {
            total += p.price;
            html += `<li class="list-group-item d-flex justify-content-between align-items-center">${
              p.title
            }<span>$${p.price.toFixed(2)}</span></li>`;
          }
        });
        html += `</ul><div class="mt-3"><strong>Total: $${total.toFixed(
          2
        )}</strong></div>`;
        container.innerHTML = html;
      }
      document.addEventListener("DOMContentLoaded", () => {
        renderCart();
        updateCartCount();
      });
      function updateCartCount() {
        const c = document.getElementById("cartCount");
        if (c)
          c.textContent = JSON.parse(
            localStorage.getItem("lfh_cart") || "[]"
          ).length;
      }
    </script>
  </body>
</html>
